<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.springlec.base.dao.ProductDetailInformationDao">

<!--전 페이지에서 선택된 옷의 값을 가져오는 쿼리  -->
<select id="productdetail" parameterType="String" resultType="com.springlec.base.model.ProductDetailInformationDto">   
                <!--정민이형 네임 들어오면#{proName} 수정하기  -->
   SELECT min(proSeq) as proSeq, proName, min(proPrice) as proPrice, min(proImage1) as proImage1
    , min(proImage2) as proImage2,min(proImage3) as proImage3,min(proIntroduction) as proIntroduction
    ,sum(proQty) as proQty 
    FROM product 
    WHERE proName='BAKERSETUPSHIRT' group by proName; 
</select>
<!-- 선택된 옷의 색을 가져오는 쿼리 -->
<select id="color" parameterType="String" resultType="String" >
    SELECT DISTINCT proColor FROM product WHERE proName='BAKERSETUPSHIRT'
</select>
<!-- id 수정필요 -->
<insert id="productdetail">
	<!-- 상품 시퀀스(전페이지에서 넘겨준 값을 가져온다) ,유저아이디(세션에 저장되어있는 값을 가져온다),수량,가격은지금 페이지에서 파라미터값으로 가져와야될듯 -->
		INSERT INTO purchase
		(proSeq, userId, pQty, pPrice, pMethod, pStackPoint, pDate)
		VALUES (#{proSeq}, #{userId}, #{pQty}, #{pPrice},'card',#{pPrice}*0.05, now());


	</insert>



</mapper>